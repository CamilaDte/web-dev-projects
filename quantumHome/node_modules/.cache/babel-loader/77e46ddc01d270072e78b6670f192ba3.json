{"ast":null,"code":"!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? e(exports) : \"function\" == typeof define && define.amd ? define([\"exports\"], e) : e((t = t || self).St = {});\n}(this, function (t) {\n  \"use strict\";\n\n  class e {\n    constructor(t, e) {\n      this.state = {\n        angle: 0,\n        area: [],\n        position: {\n          x: 0,\n          y: 0\n        },\n        hardAngle: 0,\n        hardDrawingAngle: 0\n      }, this.createdDensity = e, this.nowDrawingDensity = this.createdDensity, this.render = t;\n    }\n\n    setDensity(t) {\n      this.createdDensity = t, this.nowDrawingDensity = t;\n    }\n\n    setDrawingDensity(t) {\n      this.nowDrawingDensity = t;\n    }\n\n    setPosition(t) {\n      this.state.position = t;\n    }\n\n    setAngle(t) {\n      this.state.angle = t;\n    }\n\n    setArea(t) {\n      this.state.area = t;\n    }\n\n    setHardDrawingAngle(t) {\n      this.state.hardDrawingAngle = t;\n    }\n\n    setHardAngle(t) {\n      this.state.hardAngle = t, this.state.hardDrawingAngle = t;\n    }\n\n    setOrientation(t) {\n      this.orientation = t;\n    }\n\n    getDrawingDensity() {\n      return this.nowDrawingDensity;\n    }\n\n    getDensity() {\n      return this.createdDensity;\n    }\n\n    getHardAngle() {\n      return this.state.hardAngle;\n    }\n\n  }\n\n  class i extends e {\n    constructor(t, e, i) {\n      super(t, i), this.image = null, this.isLoad = !1, this.loadingAngle = 0, this.image = new Image(), this.image.src = e;\n    }\n\n    draw(t) {\n      const e = this.render.getContext(),\n            i = this.render.convertToGlobal(this.state.position),\n            s = this.render.getRect().pageWidth,\n            n = this.render.getRect().height;\n      e.save(), e.translate(i.x, i.y), e.beginPath();\n\n      for (let t of this.state.area) null !== t && (t = this.render.convertToGlobal(t), e.lineTo(t.x - i.x, t.y - i.y));\n\n      e.rotate(this.state.angle), e.clip(), this.isLoad ? e.drawImage(this.image, 0, 0, s, n) : this.drawLoader(e, {\n        x: 0,\n        y: 0\n      }, s, n), e.restore();\n    }\n\n    simpleDraw(t) {\n      const e = this.render.getRect(),\n            i = this.render.getContext(),\n            s = e.pageWidth,\n            n = e.height,\n            h = 1 === t ? e.left + e.pageWidth : e.left,\n            r = e.top;\n      this.isLoad ? i.drawImage(this.image, h, r, s, n) : this.drawLoader(i, {\n        x: h,\n        y: r\n      }, s, n);\n    }\n\n    drawLoader(t, e, i, s) {\n      t.beginPath(), t.strokeStyle = \"rgb(200, 200, 200)\", t.fillStyle = \"rgb(255, 255, 255)\", t.lineWidth = 1, t.rect(e.x + 1, e.y + 1, i - 1, s - 1), t.stroke(), t.fill();\n      const n = {\n        x: e.x + i / 2,\n        y: e.y + s / 2\n      };\n      t.beginPath(), t.lineWidth = 10, t.arc(n.x, n.y, 20, this.loadingAngle, 3 * Math.PI / 2 + this.loadingAngle), t.stroke(), t.closePath(), this.loadingAngle += .07, this.loadingAngle >= 2 * Math.PI && (this.loadingAngle = 0);\n    }\n\n    load() {\n      this.isLoad || (this.image.onload = () => {\n        this.isLoad = !0;\n      });\n    }\n\n    newTemporaryCopy() {\n      return this;\n    }\n\n    getTemporaryCopy() {\n      return this;\n    }\n\n    hideTemporaryCopy() {}\n\n  }\n\n  class s {\n    constructor(t, e) {\n      this.pages = [], this.currentPageIndex = 0, this.currentSpreadIndex = 0, this.landscapeSpread = [], this.portraitSpread = [], this.render = e, this.app = t, this.currentPageIndex = 0, this.isShowCover = this.app.getSettings().showCover;\n    }\n\n    destroy() {\n      this.pages = [];\n    }\n\n    createSpread() {\n      this.landscapeSpread = [], this.portraitSpread = [];\n\n      for (let t = 0; t < this.pages.length; t++) this.portraitSpread.push([t]);\n\n      let t = 0;\n      this.isShowCover && (this.pages[0].setDensity(\"hard\"), this.landscapeSpread.push([t]), t++);\n\n      for (let e = t; e < this.pages.length; e += 2) e < this.pages.length - 1 ? this.landscapeSpread.push([e, e + 1]) : (this.landscapeSpread.push([e]), this.pages[e].setDensity(\"hard\"));\n    }\n\n    getSpread() {\n      return \"landscape\" === this.render.getOrientation() ? this.landscapeSpread : this.portraitSpread;\n    }\n\n    getSpreadIndexByPage(t) {\n      const e = this.getSpread();\n\n      for (let i = 0; i < e.length; i++) if (t === e[i][0] || t === e[i][1]) return i;\n\n      return null;\n    }\n\n    getPageCount() {\n      return this.pages.length;\n    }\n\n    getPages() {\n      return this.pages;\n    }\n\n    getPage(t) {\n      if (t >= 0 && t < this.pages.length) return this.pages[t];\n      throw new Error(\"Invalid page number\");\n    }\n\n    nextBy(t) {\n      const e = this.pages.indexOf(t);\n      return e < this.pages.length - 1 ? this.pages[e + 1] : null;\n    }\n\n    prevBy(t) {\n      const e = this.pages.indexOf(t);\n      return e > 0 ? this.pages[e - 1] : null;\n    }\n\n    getFlippingPage(t) {\n      const e = this.currentSpreadIndex;\n      if (\"portrait\" === this.render.getOrientation()) return 0 === t ? this.pages[e].newTemporaryCopy() : this.pages[e - 1];\n      {\n        const i = 0 === t ? this.getSpread()[e + 1] : this.getSpread()[e - 1];\n        return 1 === i.length || 0 === t ? this.pages[i[0]] : this.pages[i[1]];\n      }\n    }\n\n    getBottomPage(t) {\n      const e = this.currentSpreadIndex;\n      if (\"portrait\" === this.render.getOrientation()) return 0 === t ? this.pages[e + 1] : this.pages[e - 1];\n      {\n        const i = 0 === t ? this.getSpread()[e + 1] : this.getSpread()[e - 1];\n        return 1 === i.length ? this.pages[i[0]] : 0 === t ? this.pages[i[1]] : this.pages[i[0]];\n      }\n    }\n\n    showNext() {\n      this.currentSpreadIndex < this.getSpread().length && (this.currentSpreadIndex++, this.showSpread());\n    }\n\n    showPrev() {\n      this.currentSpreadIndex > 0 && (this.currentSpreadIndex--, this.showSpread());\n    }\n\n    getCurrentPageIndex() {\n      return this.currentPageIndex;\n    }\n\n    show() {\n      let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      if (null === t && (t = this.currentPageIndex), t < 0 || t >= this.pages.length) return;\n      const e = this.getSpreadIndexByPage(t);\n      null !== e && (this.currentSpreadIndex = e, this.showSpread());\n    }\n\n    getCurrentSpreadIndex() {\n      return this.currentSpreadIndex;\n    }\n\n    setCurrentSpreadIndex(t) {\n      if (!(t >= 0 && t < this.getSpread().length)) throw new Error(\"Invalid page\");\n      this.currentSpreadIndex = t;\n    }\n\n    showSpread() {\n      const t = this.getSpread()[this.currentSpreadIndex];\n      2 === t.length ? (this.render.setLeftPage(this.pages[t[0]]), this.render.setRightPage(this.pages[t[1]])) : \"landscape\" === this.render.getOrientation() && t[0] === this.pages.length - 1 ? (this.render.setLeftPage(this.pages[t[0]]), this.render.setRightPage(null)) : (this.render.setLeftPage(null), this.render.setRightPage(this.pages[t[0]])), this.currentPageIndex = t[0], this.app.updatePageIndex(this.currentPageIndex);\n    }\n\n  }\n\n  class n extends s {\n    constructor(t, e, i) {\n      super(t, e), this.imagesHref = i;\n    }\n\n    load() {\n      for (const t of this.imagesHref) {\n        const e = new i(this.render, t, \"soft\");\n        e.load(), this.pages.push(e);\n      }\n\n      this.createSpread();\n    }\n\n  }\n\n  class h {\n    static GetDistanceBetweenTwoPoint(t, e) {\n      return null === t || null === e ? 1 / 0 : Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2));\n    }\n\n    static GetSegmentLength(t) {\n      return h.GetDistanceBetweenTwoPoint(t[0], t[1]);\n    }\n\n    static GetAngleBetweenTwoLine(t, e) {\n      const i = t[0].y - t[1].y,\n            s = e[0].y - e[1].y,\n            n = t[1].x - t[0].x,\n            h = e[1].x - e[0].x;\n      return Math.acos((i * s + n * h) / (Math.sqrt(i * i + n * n) * Math.sqrt(s * s + h * h)));\n    }\n\n    static PointInRect(t, e) {\n      return null === e ? null : e.x >= t.left && e.x <= t.width + t.left && e.y >= t.top && e.y <= t.top + t.height ? e : null;\n    }\n\n    static GetRotatedPoint(t, e, i) {\n      return {\n        x: t.x * Math.cos(i) + t.y * Math.sin(i) + e.x,\n        y: t.y * Math.cos(i) - t.x * Math.sin(i) + e.y\n      };\n    }\n\n    static LimitPointToCircle(t, e, i) {\n      if (h.GetDistanceBetweenTwoPoint(t, i) <= e) return i;\n      const s = t.x,\n            n = t.y,\n            r = i.x,\n            o = i.y;\n      let a = Math.sqrt(Math.pow(e, 2) * Math.pow(s - r, 2) / (Math.pow(s - r, 2) + Math.pow(n - o, 2))) + s;\n      i.x < 0 && (a *= -1);\n      let g = (a - s) * (n - o) / (s - r) + n;\n      return s - r + n === 0 && (g = e), {\n        x: a,\n        y: g\n      };\n    }\n\n    static GetIntersectBetweenTwoSegment(t, e, i) {\n      return h.PointInRect(t, h.GetIntersectBeetwenTwoLine(e, i));\n    }\n\n    static GetIntersectBeetwenTwoLine(t, e) {\n      const i = t[0].y - t[1].y,\n            s = e[0].y - e[1].y,\n            n = t[1].x - t[0].x,\n            h = e[1].x - e[0].x,\n            r = t[0].x * t[1].y - t[1].x * t[0].y,\n            o = e[0].x * e[1].y - e[1].x * e[0].y,\n            a = i * o - s * r,\n            g = n * o - h * r,\n            l = -(r * h - o * n) / (i * h - s * n),\n            d = -(i * o - s * r) / (i * h - s * n);\n      if (isFinite(l) && isFinite(d)) return {\n        x: l,\n        y: d\n      };\n      if (Math.abs(a - g) < .1) throw new Error(\"Segment included\");\n      return null;\n    }\n\n    static GetCordsFromTwoPoint(t, e) {\n      const i = Math.abs(t.x - e.x),\n            s = Math.abs(t.y - e.y),\n            n = Math.max(i, s),\n            h = [t];\n\n      function r(t, e, i, s, n) {\n        return e > t ? t + n * (i / s) : e < t ? t - n * (i / s) : t;\n      }\n\n      for (let o = 1; o <= n; o += 1) h.push({\n        x: r(t.x, e.x, i, n, o),\n        y: r(t.y, e.y, s, n, o)\n      });\n\n      return h;\n    }\n\n  }\n\n  class r extends e {\n    constructor(t, e, i) {\n      super(t, i), this.copiedElement = null, this.temporaryCopy = null, this.isLoad = !1, this.element = e, this.element.classList.add(\"stf__item\"), this.element.classList.add(\"--\" + i);\n    }\n\n    newTemporaryCopy() {\n      return \"hard\" === this.nowDrawingDensity ? this : (null === this.temporaryCopy && (this.copiedElement = this.element.cloneNode(!0), this.element.parentElement.appendChild(this.copiedElement), this.temporaryCopy = new r(this.render, this.copiedElement, this.nowDrawingDensity)), this.getTemporaryCopy());\n    }\n\n    getTemporaryCopy() {\n      return this.temporaryCopy;\n    }\n\n    hideTemporaryCopy() {\n      null !== this.temporaryCopy && (this.copiedElement.remove(), this.copiedElement = null, this.temporaryCopy = null);\n    }\n\n    draw(t) {\n      const e = t || this.nowDrawingDensity,\n            i = this.render.convertToGlobal(this.state.position),\n            s = this.render.getRect().pageWidth,\n            n = this.render.getRect().height;\n      this.element.classList.remove(\"--simple\");\n      const h = `\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\n      \"hard\" === e ? this.drawHard(h) : this.drawSoft(i, h);\n    }\n\n    drawHard() {\n      let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      const e = this.render.getRect().left + this.render.getRect().width / 2,\n            i = this.state.hardDrawingAngle,\n            s = t + \"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \" + (0 === this.orientation ? `transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);` : `transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);\n      this.element.style.cssText = s;\n    }\n\n    drawSoft(t) {\n      let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      let i = \"polygon( \";\n\n      for (const t of this.state.area) if (null !== t) {\n        let e = 1 === this.render.getDirection() ? {\n          x: -t.x + this.state.position.x,\n          y: t.y - this.state.position.y\n        } : {\n          x: t.x - this.state.position.x,\n          y: t.y - this.state.position.y\n        };\n        e = h.GetRotatedPoint(e, {\n          x: 0,\n          y: 0\n        }, this.state.angle), i += e.x + \"px \" + e.y + \"px, \";\n      }\n\n      i = i.slice(0, -2), i += \")\";\n      const s = e + `transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};` + (this.render.isSafari() && 0 === this.state.angle ? `transform: translate(${t.x}px, ${t.y}px);` : `transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);\n      this.element.style.cssText = s;\n    }\n\n    simpleDraw(t) {\n      const e = this.render.getRect(),\n            i = e.pageWidth,\n            s = e.height,\n            n = 1 === t ? e.left + e.pageWidth : e.left,\n            h = e.top;\n      this.element.classList.add(\"--simple\"), this.element.style.cssText = `\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex + 1};`;\n    }\n\n    getElement() {\n      return this.element;\n    }\n\n    load() {\n      this.isLoad = !0;\n    }\n\n    setOrientation(t) {\n      super.setOrientation(t), this.element.classList.remove(\"--left\", \"--right\"), this.element.classList.add(1 === t ? \"--right\" : \"--left\");\n    }\n\n    setDrawingDensity(t) {\n      this.element.classList.remove(\"--soft\", \"--hard\"), this.element.classList.add(\"--\" + t), super.setDrawingDensity(t);\n    }\n\n  }\n\n  class o extends s {\n    constructor(t, e, i, s) {\n      super(t, e), this.element = i, this.pagesElement = s;\n    }\n\n    load() {\n      for (const t of this.pagesElement) {\n        const e = new r(this.render, t, \"hard\" === t.dataset.density ? \"hard\" : \"soft\");\n        e.load(), this.pages.push(e);\n      }\n\n      this.createSpread();\n    }\n\n  }\n\n  class a {\n    constructor(t, e, i, s) {\n      this.direction = t, this.corner = e, this.topIntersectPoint = null, this.sideIntersectPoint = null, this.bottomIntersectPoint = null, this.pageWidth = parseInt(i, 10), this.pageHeight = parseInt(s, 10);\n    }\n\n    calc(t) {\n      try {\n        return this.position = this.calcAngleAndPosition(t), this.calculateIntersectPoint(this.position), !0;\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    getFlippingClipArea() {\n      const t = [];\n      let e = !1;\n      return t.push(this.rect.topLeft), t.push(this.topIntersectPoint), null === this.sideIntersectPoint ? e = !0 : (t.push(this.sideIntersectPoint), null === this.bottomIntersectPoint && (e = !1)), t.push(this.bottomIntersectPoint), (e || \"bottom\" === this.corner) && t.push(this.rect.bottomLeft), t;\n    }\n\n    getBottomClipArea() {\n      const t = [];\n      return t.push(this.topIntersectPoint), \"top\" === this.corner ? t.push({\n        x: this.pageWidth,\n        y: 0\n      }) : (null !== this.topIntersectPoint && t.push({\n        x: this.pageWidth,\n        y: 0\n      }), t.push({\n        x: this.pageWidth,\n        y: this.pageHeight\n      })), null !== this.sideIntersectPoint ? h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint, this.topIntersectPoint) >= 10 && t.push(this.sideIntersectPoint) : \"top\" === this.corner && t.push({\n        x: this.pageWidth,\n        y: this.pageHeight\n      }), t.push(this.bottomIntersectPoint), t.push(this.topIntersectPoint), t;\n    }\n\n    getAngle() {\n      return 0 === this.direction ? -this.angle : this.angle;\n    }\n\n    getRect() {\n      return this.rect;\n    }\n\n    getPosition() {\n      return this.position;\n    }\n\n    getActiveCorner() {\n      return 0 === this.direction ? this.rect.topLeft : this.rect.topRight;\n    }\n\n    getDirection() {\n      return this.direction;\n    }\n\n    getFlippingProgress() {\n      return Math.abs((this.position.x - this.pageWidth) / (2 * this.pageWidth) * 100);\n    }\n\n    getCorner() {\n      return this.corner;\n    }\n\n    getBottomPagePosition() {\n      return 1 === this.direction ? {\n        x: this.pageWidth,\n        y: 0\n      } : {\n        x: 0,\n        y: 0\n      };\n    }\n\n    getShadowStartPoint() {\n      return \"top\" === this.corner ? this.topIntersectPoint : null !== this.sideIntersectPoint ? this.sideIntersectPoint : this.topIntersectPoint;\n    }\n\n    getShadowAngle() {\n      const t = h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(), [{\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }]);\n      return 0 === this.direction ? t : Math.PI - t;\n    }\n\n    calcAngleAndPosition(t) {\n      let e = t;\n      if (this.updateAngleAndGeometry(e), e = \"top\" === this.corner ? this.checkPositionAtCenterLine(e, {\n        x: 0,\n        y: 0\n      }, {\n        x: 0,\n        y: this.pageHeight\n      }) : this.checkPositionAtCenterLine(e, {\n        x: 0,\n        y: this.pageHeight\n      }, {\n        x: 0,\n        y: 0\n      }), Math.abs(e.x - this.pageWidth) < 1 && Math.abs(e.y) < 1) throw new Error(\"Point is too small\");\n      return e;\n    }\n\n    updateAngleAndGeometry(t) {\n      this.angle = this.calculateAngle(t), this.rect = this.getPageRect(t);\n    }\n\n    calculateAngle(t) {\n      const e = this.pageWidth - t.x + 1,\n            i = \"bottom\" === this.corner ? this.pageHeight - t.y : t.y;\n      let s = 2 * Math.acos(e / Math.sqrt(i * i + e * e));\n      i < 0 && (s = -s);\n      const n = Math.PI - s;\n      if (!isFinite(s) || n >= 0 && n < .003) throw new Error(\"The G point is too small\");\n      return \"bottom\" === this.corner && (s = -s), s;\n    }\n\n    getPageRect(t) {\n      return \"top\" === this.corner ? this.getRectFromBasePoint([{\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }, {\n        x: 0,\n        y: this.pageHeight\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }], t) : this.getRectFromBasePoint([{\n        x: 0,\n        y: -this.pageHeight\n      }, {\n        x: this.pageWidth,\n        y: -this.pageHeight\n      }, {\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }], t);\n    }\n\n    getRectFromBasePoint(t, e) {\n      return {\n        topLeft: this.getRotatedPoint(t[0], e),\n        topRight: this.getRotatedPoint(t[1], e),\n        bottomLeft: this.getRotatedPoint(t[2], e),\n        bottomRight: this.getRotatedPoint(t[3], e)\n      };\n    }\n\n    getRotatedPoint(t, e) {\n      return {\n        x: t.x * Math.cos(this.angle) + t.y * Math.sin(this.angle) + e.x,\n        y: t.y * Math.cos(this.angle) - t.x * Math.sin(this.angle) + e.y\n      };\n    }\n\n    calculateIntersectPoint(t) {\n      const e = {\n        left: -1,\n        top: -1,\n        width: this.pageWidth + 2,\n        height: this.pageHeight + 2\n      };\n      \"top\" === this.corner ? (this.topIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [t, this.rect.topRight], [{\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }]), this.sideIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [t, this.rect.bottomLeft], [{\n        x: this.pageWidth,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }]), this.bottomIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [this.rect.bottomLeft, this.rect.bottomRight], [{\n        x: 0,\n        y: this.pageHeight\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }])) : (this.topIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [this.rect.topLeft, this.rect.topRight], [{\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }]), this.sideIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [t, this.rect.topLeft], [{\n        x: this.pageWidth,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }]), this.bottomIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [this.rect.bottomLeft, this.rect.bottomRight], [{\n        x: 0,\n        y: this.pageHeight\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }]));\n    }\n\n    checkPositionAtCenterLine(t, e, i) {\n      let s = t;\n      const n = h.LimitPointToCircle(e, this.pageWidth, s);\n      s !== n && (s = n, this.updateAngleAndGeometry(s));\n      const r = Math.sqrt(Math.pow(this.pageWidth, 2) + Math.pow(this.pageHeight, 2));\n      let o = this.rect.bottomRight,\n          a = this.rect.topLeft;\n\n      if (\"bottom\" === this.corner && (o = this.rect.topRight, a = this.rect.bottomLeft), o.x <= 0) {\n        const t = h.LimitPointToCircle(i, r, a);\n        t !== s && (s = t, this.updateAngleAndGeometry(s));\n      }\n\n      return s;\n    }\n\n    getSegmentToShadowLine() {\n      const t = this.getShadowStartPoint();\n      return [t, t !== this.sideIntersectPoint && null !== this.sideIntersectPoint ? this.sideIntersectPoint : this.bottomIntersectPoint];\n    }\n\n  }\n\n  class g {\n    constructor(t, e) {\n      this.flippingPage = null, this.bottomPage = null, this.calc = null, this.state = \"read\", this.render = t, this.app = e;\n    }\n\n    fold(t) {\n      this.setState(\"user_fold\"), null === this.calc && this.start(t), this.do(this.render.convertToPage(t));\n    }\n\n    flip(t) {\n      if (this.app.getSettings().disableFlipByClick && !this.isPointOnCorners(t)) return;\n      if (null !== this.calc && this.render.finishAnimation(), !this.start(t)) return;\n      const e = this.getBoundsRect();\n      this.setState(\"flipping\");\n      const i = e.height / 10,\n            s = \"bottom\" === this.calc.getCorner() ? e.height - i : i,\n            n = \"bottom\" === this.calc.getCorner() ? e.height : 0;\n      this.calc.calc({\n        x: e.pageWidth - i,\n        y: s\n      }), this.animateFlippingTo({\n        x: e.pageWidth - i,\n        y: s\n      }, {\n        x: -e.pageWidth,\n        y: n\n      }, !0);\n    }\n\n    start(t) {\n      this.reset();\n      const e = this.render.convertToBook(t),\n            i = this.getBoundsRect(),\n            s = this.getDirectionByPoint(e),\n            n = e.y >= i.height / 2 ? \"bottom\" : \"top\";\n      if (!this.checkDirection(s)) return !1;\n\n      try {\n        if (this.flippingPage = this.app.getPageCollection().getFlippingPage(s), this.bottomPage = this.app.getPageCollection().getBottomPage(s), \"landscape\" === this.render.getOrientation()) if (1 === s) {\n          const t = this.app.getPageCollection().nextBy(this.flippingPage);\n          null !== t && this.flippingPage.getDensity() !== t.getDensity() && (this.flippingPage.setDrawingDensity(\"hard\"), t.setDrawingDensity(\"hard\"));\n        } else {\n          const t = this.app.getPageCollection().prevBy(this.flippingPage);\n          null !== t && this.flippingPage.getDensity() !== t.getDensity() && (this.flippingPage.setDrawingDensity(\"hard\"), t.setDrawingDensity(\"hard\"));\n        }\n        return this.render.setDirection(s), this.calc = new a(s, n, i.pageWidth.toString(10), i.height.toString(10)), !0;\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    do(t) {\n      if (null !== this.calc && this.calc.calc(t)) {\n        const t = this.calc.getFlippingProgress();\n        this.bottomPage.setArea(this.calc.getBottomClipArea()), this.bottomPage.setPosition(this.calc.getBottomPagePosition()), this.bottomPage.setAngle(0), this.bottomPage.setHardAngle(0), this.flippingPage.setArea(this.calc.getFlippingClipArea()), this.flippingPage.setPosition(this.calc.getActiveCorner()), this.flippingPage.setAngle(this.calc.getAngle()), 0 === this.calc.getDirection() ? this.flippingPage.setHardAngle(90 * (200 - 2 * t) / 100) : this.flippingPage.setHardAngle(-90 * (200 - 2 * t) / 100), this.render.setPageRect(this.calc.getRect()), this.render.setBottomPage(this.bottomPage), this.render.setFlippingPage(this.flippingPage), this.render.setShadowData(this.calc.getShadowStartPoint(), this.calc.getShadowAngle(), t, this.calc.getDirection());\n      }\n    }\n\n    flipToPage(t, e) {\n      const i = this.app.getPageCollection().getCurrentSpreadIndex(),\n            s = this.app.getPageCollection().getSpreadIndexByPage(t);\n\n      try {\n        s > i && (this.app.getPageCollection().setCurrentSpreadIndex(s - 1), this.flipNext(e)), s < i && (this.app.getPageCollection().setCurrentSpreadIndex(s + 1), this.flipPrev(e));\n      } catch (t) {}\n    }\n\n    flipNext(t) {\n      this.flip({\n        x: this.render.getRect().left + 2 * this.render.getRect().pageWidth - 10,\n        y: \"top\" === t ? 1 : this.render.getRect().height - 2\n      });\n    }\n\n    flipPrev(t) {\n      this.flip({\n        x: 10,\n        y: \"top\" === t ? 1 : this.render.getRect().height - 2\n      });\n    }\n\n    stopMove() {\n      if (null === this.calc) return;\n      const t = this.calc.getPosition(),\n            e = this.getBoundsRect(),\n            i = \"bottom\" === this.calc.getCorner() ? e.height : 0;\n      t.x <= 0 ? this.animateFlippingTo(t, {\n        x: -e.pageWidth,\n        y: i\n      }, !0) : this.animateFlippingTo(t, {\n        x: e.pageWidth,\n        y: i\n      }, !1);\n    }\n\n    showCorner(t) {\n      if (!this.checkState(\"read\", \"fold_corner\")) return;\n      const e = this.getBoundsRect(),\n            i = e.pageWidth;\n      if (this.isPointOnCorners(t)) {\n        if (null === this.calc) {\n          if (!this.start(t)) return;\n          this.setState(\"fold_corner\"), this.calc.calc({\n            x: i - 1,\n            y: 1\n          });\n          const s = 50,\n                n = \"bottom\" === this.calc.getCorner() ? e.height - 1 : 1,\n                h = \"bottom\" === this.calc.getCorner() ? e.height - s : s;\n          this.animateFlippingTo({\n            x: i - 1,\n            y: n\n          }, {\n            x: i - s,\n            y: h\n          }, !1, !1);\n        } else this.do(this.render.convertToPage(t));\n      } else this.setState(\"read\"), this.render.finishAnimation(), this.stopMove();\n    }\n\n    animateFlippingTo(t, e, i) {\n      let s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n      const n = h.GetCordsFromTwoPoint(t, e),\n            r = [];\n\n      for (const t of n) r.push(() => this.do(t));\n\n      const o = this.getAnimationDuration(n.length);\n      this.render.startAnimation(r, o, () => {\n        this.calc && (i && (1 === this.calc.getDirection() ? this.app.turnToPrevPage() : this.app.turnToNextPage()), s && (this.render.setBottomPage(null), this.render.setFlippingPage(null), this.render.clearShadow(), this.setState(\"read\"), this.reset()));\n      });\n    }\n\n    getCalculation() {\n      return this.calc;\n    }\n\n    getState() {\n      return this.state;\n    }\n\n    setState(t) {\n      this.state !== t && (this.app.updateState(t), this.state = t);\n    }\n\n    getDirectionByPoint(t) {\n      const e = this.getBoundsRect();\n\n      if (\"portrait\" === this.render.getOrientation()) {\n        if (t.x - e.pageWidth <= e.width / 5) return 1;\n      } else if (t.x < e.width / 2) return 1;\n\n      return 0;\n    }\n\n    getAnimationDuration(t) {\n      const e = this.app.getSettings().flippingTime;\n      return t >= 1e3 ? e : t / 1e3 * e;\n    }\n\n    checkDirection(t) {\n      return 0 === t ? this.app.getCurrentPageIndex() < this.app.getPageCount() - 1 : this.app.getCurrentPageIndex() >= 1;\n    }\n\n    reset() {\n      this.calc = null, this.flippingPage = null, this.bottomPage = null;\n    }\n\n    getBoundsRect() {\n      return this.render.getRect();\n    }\n\n    checkState() {\n      for (var _len = arguments.length, t = new Array(_len), _key = 0; _key < _len; _key++) {\n        t[_key] = arguments[_key];\n      }\n\n      for (const e of t) if (this.state === e) return !0;\n\n      return !1;\n    }\n\n    isPointOnCorners(t) {\n      const e = this.getBoundsRect(),\n            i = e.pageWidth,\n            s = Math.sqrt(Math.pow(i, 2) + Math.pow(e.height, 2)) / 5,\n            n = this.render.convertToBook(t);\n      return n.x > 0 && n.y > 0 && n.x < e.width && n.y < e.height && (n.x < s || n.x > e.width - s) && (n.y < s || n.y > e.height - s);\n    }\n\n  }\n\n  class l {\n    constructor(t, e) {\n      this.leftPage = null, this.rightPage = null, this.flippingPage = null, this.bottomPage = null, this.direction = null, this.orientation = null, this.shadow = null, this.animation = null, this.pageRect = null, this.boundsRect = null, this.timer = 0, this.safari = !1, this.setting = e, this.app = t;\n      const i = new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");\n      this.safari = null !== i.exec(window.navigator.userAgent);\n    }\n\n    render(t) {\n      if (null !== this.animation) {\n        const e = Math.round((t - this.animation.startedAt) / this.animation.durationFrame);\n        e < this.animation.frames.length ? this.animation.frames[e]() : (this.animation.onAnimateEnd(), this.animation = null);\n      }\n\n      this.timer = t, this.drawFrame();\n    }\n\n    start() {\n      this.update();\n\n      const t = e => {\n        this.render(e), requestAnimationFrame(t);\n      };\n\n      requestAnimationFrame(t);\n    }\n\n    startAnimation(t, e, i) {\n      this.finishAnimation(), this.animation = {\n        frames: t,\n        duration: e,\n        durationFrame: e / t.length,\n        onAnimateEnd: i,\n        startedAt: this.timer\n      };\n    }\n\n    finishAnimation() {\n      null !== this.animation && (this.animation.frames[this.animation.frames.length - 1](), null !== this.animation.onAnimateEnd && this.animation.onAnimateEnd()), this.animation = null;\n    }\n\n    update() {\n      this.boundsRect = null;\n      const t = this.calculateBoundsRect();\n      this.orientation !== t && (this.orientation = t, this.app.updateOrientation(t));\n    }\n\n    calculateBoundsRect() {\n      let t = \"landscape\";\n      const e = this.getBlockWidth(),\n            i = e / 2,\n            s = this.getBlockHeight() / 2,\n            n = this.setting.width / this.setting.height;\n      let h = this.setting.width,\n          r = this.setting.height,\n          o = i - h;\n      return \"stretch\" === this.setting.size ? (e < 2 * this.setting.minWidth && this.app.getSettings().usePortrait && (t = \"portrait\"), h = \"portrait\" === t ? this.getBlockWidth() : this.getBlockWidth() / 2, h > this.setting.maxWidth && (h = this.setting.maxWidth), r = h / n, r > this.getBlockHeight() && (r = this.getBlockHeight(), h = r * n), o = \"portrait\" === t ? i - h / 2 - h : i - h) : e < 2 * h && this.app.getSettings().usePortrait && (t = \"portrait\", o = i - h / 2 - h), this.boundsRect = {\n        left: o,\n        top: s - r / 2,\n        width: 2 * h,\n        height: r,\n        pageWidth: h\n      }, t;\n    }\n\n    setShadowData(t, e, i, s) {\n      if (!this.app.getSettings().drawShadow) return;\n      const n = 100 * this.getSettings().maxShadowOpacity;\n      this.shadow = {\n        pos: t,\n        angle: e,\n        width: 3 * this.getRect().pageWidth / 4 * i / 100,\n        opacity: (100 - i) * n / 100 / 100,\n        direction: s,\n        progress: 2 * i\n      };\n    }\n\n    clearShadow() {\n      this.shadow = null;\n    }\n\n    getBlockWidth() {\n      return this.app.getUI().getDistElement().offsetWidth;\n    }\n\n    getBlockHeight() {\n      return this.app.getUI().getDistElement().offsetHeight;\n    }\n\n    getDirection() {\n      return this.direction;\n    }\n\n    getRect() {\n      return null === this.boundsRect && this.calculateBoundsRect(), this.boundsRect;\n    }\n\n    getSettings() {\n      return this.app.getSettings();\n    }\n\n    getOrientation() {\n      return this.orientation;\n    }\n\n    setPageRect(t) {\n      this.pageRect = t;\n    }\n\n    setDirection(t) {\n      this.direction = t;\n    }\n\n    setRightPage(t) {\n      null !== t && t.setOrientation(1), this.rightPage = t;\n    }\n\n    setLeftPage(t) {\n      null !== t && t.setOrientation(0), this.leftPage = t;\n    }\n\n    setBottomPage(t) {\n      null !== t && t.setOrientation(1 === this.direction ? 0 : 1), this.bottomPage = t;\n    }\n\n    setFlippingPage(t) {\n      null !== t && t.setOrientation(0 === this.direction && \"portrait\" !== this.orientation ? 0 : 1), this.flippingPage = t;\n    }\n\n    convertToBook(t) {\n      const e = this.getRect();\n      return {\n        x: t.x - e.left,\n        y: t.y - e.top\n      };\n    }\n\n    isSafari() {\n      return this.safari;\n    }\n\n    convertToPage(t, e) {\n      e || (e = this.direction);\n      const i = this.getRect();\n      return {\n        x: 0 === e ? t.x - i.left - i.width / 2 : i.width / 2 - t.x + i.left,\n        y: t.y - i.top\n      };\n    }\n\n    convertToGlobal(t, e) {\n      if (e || (e = this.direction), null == t) return null;\n      const i = this.getRect();\n      return {\n        x: 0 === e ? t.x + i.left + i.width / 2 : i.width / 2 - t.x + i.left,\n        y: t.y + i.top\n      };\n    }\n\n    convertRectToGlobal(t, e) {\n      return e || (e = this.direction), {\n        topLeft: this.convertToGlobal(t.topLeft, e),\n        topRight: this.convertToGlobal(t.topRight, e),\n        bottomLeft: this.convertToGlobal(t.bottomLeft, e),\n        bottomRight: this.convertToGlobal(t.bottomRight, e)\n      };\n    }\n\n  }\n\n  class d extends l {\n    constructor(t, e, i) {\n      super(t, e), this.canvas = i, this.ctx = i.getContext(\"2d\");\n    }\n\n    getContext() {\n      return this.ctx;\n    }\n\n    reload() {}\n\n    drawFrame() {\n      this.clear(), \"portrait\" !== this.orientation && null != this.leftPage && this.leftPage.simpleDraw(0), null != this.rightPage && this.rightPage.simpleDraw(1), null != this.bottomPage && this.bottomPage.draw(), this.drawBookShadow(), null != this.flippingPage && this.flippingPage.draw(), null != this.shadow && (this.drawOuterShadow(), this.drawInnerShadow());\n      const t = this.getRect();\n      \"portrait\" === this.orientation && (this.ctx.beginPath(), this.ctx.rect(t.left + t.pageWidth, t.top, t.width, t.height), this.ctx.clip());\n    }\n\n    drawBookShadow() {\n      const t = this.getRect();\n      this.ctx.save(), this.ctx.beginPath();\n      const e = t.width / 20;\n      this.ctx.rect(t.left, t.top, t.width, t.height);\n      const i = {\n        x: t.left + t.width / 2 - e / 2,\n        y: 0\n      };\n      this.ctx.translate(i.x, i.y);\n      const s = this.ctx.createLinearGradient(0, 0, e, 0);\n      s.addColorStop(0, \"rgba(0, 0, 0, 0)\"), s.addColorStop(.4, \"rgba(0, 0, 0, 0.2)\"), s.addColorStop(.49, \"rgba(0, 0, 0, 0.1)\"), s.addColorStop(.5, \"rgba(0, 0, 0, 0.5)\"), s.addColorStop(.51, \"rgba(0, 0, 0, 0.4)\"), s.addColorStop(1, \"rgba(0, 0, 0, 0)\"), this.ctx.clip(), this.ctx.fillStyle = s, this.ctx.fillRect(0, 0, e, 2 * t.height), this.ctx.restore();\n    }\n\n    drawOuterShadow() {\n      const t = this.getRect();\n      this.ctx.save(), this.ctx.beginPath(), this.ctx.rect(t.left, t.top, t.width, t.height);\n      const e = this.convertToGlobal({\n        x: this.shadow.pos.x,\n        y: this.shadow.pos.y\n      });\n      this.ctx.translate(e.x, e.y), this.ctx.rotate(Math.PI + this.shadow.angle + Math.PI / 2);\n      const i = this.ctx.createLinearGradient(0, 0, this.shadow.width, 0);\n      0 === this.shadow.direction ? (this.ctx.translate(0, -100), i.addColorStop(0, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), i.addColorStop(1, \"rgba(0, 0, 0, 0)\")) : (this.ctx.translate(-this.shadow.width, -100), i.addColorStop(0, \"rgba(0, 0, 0, 0)\"), i.addColorStop(1, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\")), this.ctx.clip(), this.ctx.fillStyle = i, this.ctx.fillRect(0, 0, this.shadow.width, 2 * t.height), this.ctx.restore();\n    }\n\n    drawInnerShadow() {\n      const t = this.getRect();\n      this.ctx.save(), this.ctx.beginPath();\n      const e = this.convertToGlobal({\n        x: this.shadow.pos.x,\n        y: this.shadow.pos.y\n      }),\n            i = this.convertRectToGlobal(this.pageRect);\n      this.ctx.moveTo(i.topLeft.x, i.topLeft.y), this.ctx.lineTo(i.topRight.x, i.topRight.y), this.ctx.lineTo(i.bottomRight.x, i.bottomRight.y), this.ctx.lineTo(i.bottomLeft.x, i.bottomLeft.y), this.ctx.translate(e.x, e.y), this.ctx.rotate(Math.PI + this.shadow.angle + Math.PI / 2);\n      const s = 3 * this.shadow.width / 4,\n            n = this.ctx.createLinearGradient(0, 0, s, 0);\n      0 === this.shadow.direction ? (this.ctx.translate(-s, -100), n.addColorStop(1, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(.9, \"rgba(0, 0, 0, 0.05)\"), n.addColorStop(.7, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(0, \"rgba(0, 0, 0, 0)\")) : (this.ctx.translate(0, -100), n.addColorStop(0, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(.1, \"rgba(0, 0, 0, 0.05)\"), n.addColorStop(.3, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(1, \"rgba(0, 0, 0, 0)\")), this.ctx.clip(), this.ctx.fillStyle = n, this.ctx.fillRect(0, 0, s, 2 * t.height), this.ctx.restore();\n    }\n\n    clear() {\n      this.ctx.fillStyle = \"white\", this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n  }\n\n  class p {\n    constructor(t, e, i) {\n      this.touchPoint = null, this.swipeTimeout = 250, this.onResize = () => {\n        this.update();\n      }, this.onMouseDown = t => {\n        if (this.checkTarget(t.target)) {\n          const e = this.getMousePos(t.clientX, t.clientY);\n          this.app.startUserTouch(e), t.preventDefault();\n        }\n      }, this.onTouchStart = t => {\n        if (this.checkTarget(t.target) && t.changedTouches.length > 0) {\n          const e = t.changedTouches[0],\n                i = this.getMousePos(e.clientX, e.clientY);\n          this.touchPoint = {\n            point: i,\n            time: Date.now()\n          }, setTimeout(() => {\n            null !== this.touchPoint && this.app.startUserTouch(i);\n          }, this.swipeTimeout), this.app.getSettings().mobileScrollSupport || t.preventDefault();\n        }\n      }, this.onMouseUp = t => {\n        const e = this.getMousePos(t.clientX, t.clientY);\n        this.app.userStop(e);\n      }, this.onMouseMove = t => {\n        const e = this.getMousePos(t.clientX, t.clientY);\n        this.app.userMove(e, !1);\n      }, this.onTouchMove = t => {\n        if (t.changedTouches.length > 0) {\n          const e = t.changedTouches[0],\n                i = this.getMousePos(e.clientX, e.clientY);\n          this.app.getSettings().mobileScrollSupport ? (null !== this.touchPoint && (Math.abs(this.touchPoint.point.x - i.x) > 10 || \"read\" !== this.app.getState()) && t.cancelable && this.app.userMove(i, !0), \"read\" !== this.app.getState() && t.preventDefault()) : this.app.userMove(i, !0);\n        }\n      }, this.onTouchEnd = t => {\n        if (t.changedTouches.length > 0) {\n          const e = t.changedTouches[0],\n                i = this.getMousePos(e.clientX, e.clientY);\n          let s = !1;\n\n          if (null !== this.touchPoint) {\n            const t = i.x - this.touchPoint.point.x,\n                  e = Math.abs(i.y - this.touchPoint.point.y);\n            Math.abs(t) > this.swipeDistance && e < 2 * this.swipeDistance && Date.now() - this.touchPoint.time < this.swipeTimeout && (t > 0 ? this.app.flipPrev(this.touchPoint.point.y < this.app.getRender().getRect().height / 2 ? \"top\" : \"bottom\") : this.app.flipNext(this.touchPoint.point.y < this.app.getRender().getRect().height / 2 ? \"top\" : \"bottom\"), s = !0), this.touchPoint = null;\n          }\n\n          this.app.userStop(i, s);\n        }\n      }, this.parentElement = t, t.classList.add(\"stf__parent\"), t.insertAdjacentHTML(\"afterbegin\", '<div class=\"stf__wrapper\"></div>'), this.wrapper = t.querySelector(\".stf__wrapper\"), this.app = e;\n      const s = this.app.getSettings().usePortrait ? 1 : 2;\n      t.style.minWidth = i.minWidth * s + \"px\", t.style.minHeight = i.minHeight + \"px\", \"fixed\" === i.size && (t.style.minWidth = i.width * s + \"px\", t.style.minHeight = i.height + \"px\"), i.autoSize && (t.style.width = \"100%\", t.style.maxWidth = 2 * i.maxWidth + \"px\"), t.style.display = \"block\", window.addEventListener(\"resize\", this.onResize, !1), this.swipeDistance = i.swipeDistance;\n    }\n\n    destroy() {\n      this.app.getSettings().useMouseEvents && this.removeHandlers(), this.distElement.remove(), this.wrapper.remove();\n    }\n\n    getDistElement() {\n      return this.distElement;\n    }\n\n    getWrapper() {\n      return this.wrapper;\n    }\n\n    setOrientationStyle(t) {\n      this.wrapper.classList.remove(\"--portrait\", \"--landscape\"), \"portrait\" === t ? (this.app.getSettings().autoSize && (this.wrapper.style.paddingBottom = this.app.getSettings().height / this.app.getSettings().width * 100 + \"%\"), this.wrapper.classList.add(\"--portrait\")) : (this.app.getSettings().autoSize && (this.wrapper.style.paddingBottom = this.app.getSettings().height / (2 * this.app.getSettings().width) * 100 + \"%\"), this.wrapper.classList.add(\"--landscape\")), this.update();\n    }\n\n    removeHandlers() {\n      window.removeEventListener(\"resize\", this.onResize), this.distElement.removeEventListener(\"mousedown\", this.onMouseDown), this.distElement.removeEventListener(\"touchstart\", this.onTouchStart), window.removeEventListener(\"mousemove\", this.onMouseMove), window.removeEventListener(\"touchmove\", this.onTouchMove), window.removeEventListener(\"mouseup\", this.onMouseUp), window.removeEventListener(\"touchend\", this.onTouchEnd);\n    }\n\n    setHandlers() {\n      window.addEventListener(\"resize\", this.onResize, !1), this.app.getSettings().useMouseEvents && (this.distElement.addEventListener(\"mousedown\", this.onMouseDown), this.distElement.addEventListener(\"touchstart\", this.onTouchStart), window.addEventListener(\"mousemove\", this.onMouseMove), window.addEventListener(\"touchmove\", this.onTouchMove, {\n        passive: !this.app.getSettings().mobileScrollSupport\n      }), window.addEventListener(\"mouseup\", this.onMouseUp), window.addEventListener(\"touchend\", this.onTouchEnd));\n    }\n\n    getMousePos(t, e) {\n      const i = this.distElement.getBoundingClientRect();\n      return {\n        x: t - i.left,\n        y: e - i.top\n      };\n    }\n\n    checkTarget(t) {\n      return !this.app.getSettings().clickEventForward || ![\"a\", \"button\"].includes(t.tagName.toLowerCase());\n    }\n\n  }\n\n  class c extends p {\n    constructor(t, e, i, s) {\n      super(t, e, i), this.wrapper.insertAdjacentHTML(\"afterbegin\", '<div class=\"stf__block\"></div>'), this.distElement = t.querySelector(\".stf__block\"), this.items = s;\n\n      for (const t of s) this.distElement.appendChild(t);\n\n      this.setHandlers();\n    }\n\n    clear() {\n      for (const t of this.items) this.parentElement.appendChild(t);\n    }\n\n    updateItems(t) {\n      this.removeHandlers(), this.distElement.innerHTML = \"\";\n\n      for (const e of t) this.distElement.appendChild(e);\n\n      this.items = t, this.setHandlers();\n    }\n\n    update() {\n      this.app.getRender().update();\n    }\n\n  }\n\n  class u extends p {\n    constructor(t, e, i) {\n      super(t, e, i), this.wrapper.innerHTML = '<canvas class=\"stf__canvas\"></canvas>', this.canvas = t.querySelectorAll(\"canvas\")[0], this.distElement = this.canvas, this.resizeCanvas(), this.setHandlers();\n    }\n\n    resizeCanvas() {\n      const t = getComputedStyle(this.canvas),\n            e = parseInt(t.getPropertyValue(\"width\"), 10),\n            i = parseInt(t.getPropertyValue(\"height\"), 10);\n      this.canvas.width = e, this.canvas.height = i;\n    }\n\n    getCanvas() {\n      return this.canvas;\n    }\n\n    update() {\n      this.resizeCanvas(), this.app.getRender().update();\n    }\n\n  }\n\n  class w extends l {\n    constructor(t, e, i) {\n      super(t, e), this.outerShadow = null, this.innerShadow = null, this.hardShadow = null, this.hardInnerShadow = null, this.element = i, this.createShadows();\n    }\n\n    createShadows() {\n      this.element.insertAdjacentHTML(\"beforeend\", '<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'), this.outerShadow = this.element.querySelector(\".stf__outerShadow\"), this.innerShadow = this.element.querySelector(\".stf__innerShadow\"), this.hardShadow = this.element.querySelector(\".stf__hardShadow\"), this.hardInnerShadow = this.element.querySelector(\".stf__hardInnerShadow\");\n    }\n\n    clearShadow() {\n      super.clearShadow(), this.outerShadow.style.cssText = \"display: none\", this.innerShadow.style.cssText = \"display: none\", this.hardShadow.style.cssText = \"display: none\", this.hardInnerShadow.style.cssText = \"display: none\";\n    }\n\n    reload() {\n      this.element.querySelector(\".stf__outerShadow\") || this.createShadows();\n    }\n\n    drawHardInnerShadow() {\n      const t = this.getRect(),\n            e = this.shadow.progress > 100 ? 200 - this.shadow.progress : this.shadow.progress;\n      let i = (100 - e) * (2.5 * t.pageWidth) / 100 + 20;\n      i > t.pageWidth && (i = t.pageWidth);\n      let s = `\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex + 5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity * e / 100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left + t.width / 2}px;\\n            transform-origin: 0 0;\\n        `;\n      s += 0 === this.getDirection() && this.shadow.progress > 100 || 1 === this.getDirection() && this.shadow.progress <= 100 ? \"transform: translate3d(0, 0, 0);\" : \"transform: translate3d(0, 0, 0) rotateY(180deg);\", this.hardInnerShadow.style.cssText = s;\n    }\n\n    drawHardOuterShadow() {\n      const t = this.getRect();\n      let e = (100 - (this.shadow.progress > 100 ? 200 - this.shadow.progress : this.shadow.progress)) * (2.5 * t.pageWidth) / 100 + 20;\n      e > t.pageWidth && (e = t.pageWidth);\n      let i = `\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex + 4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left + t.width / 2}px;\\n            transform-origin: 0 0;\\n        `;\n      i += 0 === this.getDirection() && this.shadow.progress > 100 || 1 === this.getDirection() && this.shadow.progress <= 100 ? \"transform: translate3d(0, 0, 0) rotateY(180deg);\" : \"transform: translate3d(0, 0, 0);\", this.hardShadow.style.cssText = i;\n    }\n\n    drawInnerShadow() {\n      const t = this.getRect(),\n            e = 3 * this.shadow.width / 4,\n            i = 0 === this.getDirection() ? e : 0,\n            s = 0 === this.getDirection() ? \"to left\" : \"to right\",\n            n = this.convertToGlobal(this.shadow.pos),\n            r = this.shadow.angle + 3 * Math.PI / 2,\n            o = [this.pageRect.topLeft, this.pageRect.topRight, this.pageRect.bottomRight, this.pageRect.bottomLeft];\n      let a = \"polygon( \";\n\n      for (const t of o) {\n        let e = 1 === this.getDirection() ? {\n          x: -t.x + this.shadow.pos.x,\n          y: t.y - this.shadow.pos.y\n        } : {\n          x: t.x - this.shadow.pos.x,\n          y: t.y - this.shadow.pos.y\n        };\n        e = h.GetRotatedPoint(e, {\n          x: i,\n          y: 100\n        }, r), a += e.x + \"px \" + e.y + \"px, \";\n      }\n\n      a = a.slice(0, -2), a += \")\";\n      const g = `\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex + 10).toString(10)};\\n            width: ${e}px;\\n            height: ${2 * t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x - i}px, ${n.y - 100}px, 0) rotate(${r}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;\n      this.innerShadow.style.cssText = g;\n    }\n\n    drawOuterShadow() {\n      const t = this.getRect(),\n            e = this.convertToGlobal({\n        x: this.shadow.pos.x,\n        y: this.shadow.pos.y\n      }),\n            i = this.shadow.angle + 3 * Math.PI / 2,\n            s = 1 === this.getDirection() ? this.shadow.width : 0,\n            n = 0 === this.getDirection() ? \"to right\" : \"to left\",\n            r = [{\n        x: 0,\n        y: 0\n      }, {\n        x: t.pageWidth,\n        y: 0\n      }, {\n        x: t.pageWidth,\n        y: t.height\n      }, {\n        x: 0,\n        y: t.height\n      }];\n      let o = \"polygon( \";\n\n      for (const t of r) if (null !== t) {\n        let e = 1 === this.getDirection() ? {\n          x: -t.x + this.shadow.pos.x,\n          y: t.y - this.shadow.pos.y\n        } : {\n          x: t.x - this.shadow.pos.x,\n          y: t.y - this.shadow.pos.y\n        };\n        e = h.GetRotatedPoint(e, {\n          x: s,\n          y: 100\n        }, i), o += e.x + \"px \" + e.y + \"px, \";\n      }\n\n      o = o.slice(0, -2), o += \")\";\n      const a = `\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex + 10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2 * t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x - s}px, ${e.y - 100}px, 0) rotate(${i}rad);\\n            clip-path: ${o};\\n            -webkit-clip-path: ${o};\\n        `;\n      this.outerShadow.style.cssText = a;\n    }\n\n    drawLeftPage() {\n      \"portrait\" !== this.orientation && null !== this.leftPage && (1 === this.direction && null !== this.flippingPage && \"hard\" === this.flippingPage.getDrawingDensity() ? (this.leftPage.getElement().style.zIndex = (this.getSettings().startZIndex + 5).toString(10), this.leftPage.setHardDrawingAngle(180 + this.flippingPage.getHardAngle()), this.leftPage.draw(this.flippingPage.getDrawingDensity())) : this.leftPage.simpleDraw(0));\n    }\n\n    drawRightPage() {\n      null !== this.rightPage && (0 === this.direction && null !== this.flippingPage && \"hard\" === this.flippingPage.getDrawingDensity() ? (this.rightPage.getElement().style.zIndex = (this.getSettings().startZIndex + 5).toString(10), this.rightPage.setHardDrawingAngle(180 + this.flippingPage.getHardAngle()), this.rightPage.draw(this.flippingPage.getDrawingDensity())) : this.rightPage.simpleDraw(1));\n    }\n\n    drawBottomPage() {\n      if (null === this.bottomPage) return;\n      const t = null != this.flippingPage ? this.flippingPage.getDrawingDensity() : null;\n      \"portrait\" === this.orientation && 1 === this.direction || (this.bottomPage.getElement().style.zIndex = (this.getSettings().startZIndex + 3).toString(10), this.bottomPage.draw(t));\n    }\n\n    drawFrame() {\n      this.clear(), this.drawLeftPage(), this.drawRightPage(), this.drawBottomPage(), null != this.flippingPage && (this.flippingPage.getElement().style.zIndex = (this.getSettings().startZIndex + 5).toString(10), this.flippingPage.draw()), null != this.shadow && null !== this.flippingPage && (\"soft\" === this.flippingPage.getDrawingDensity() ? (this.drawOuterShadow(), this.drawInnerShadow()) : (this.drawHardOuterShadow(), this.drawHardInnerShadow()));\n    }\n\n    clear() {\n      for (const t of this.app.getPageCollection().getPages()) t !== this.leftPage && t !== this.rightPage && t !== this.flippingPage && t !== this.bottomPage && (t.getElement().style.cssText = \"display: none\"), t.getTemporaryCopy() !== this.flippingPage && t.hideTemporaryCopy();\n    }\n\n    update() {\n      super.update(), null !== this.rightPage && this.rightPage.setOrientation(1), null !== this.leftPage && this.leftPage.setOrientation(0);\n    }\n\n  }\n\n  class x {\n    constructor() {\n      this._default = {\n        startPage: 0,\n        size: \"fixed\",\n        width: 0,\n        height: 0,\n        minWidth: 0,\n        maxWidth: 0,\n        minHeight: 0,\n        maxHeight: 0,\n        drawShadow: !0,\n        flippingTime: 1e3,\n        usePortrait: !0,\n        startZIndex: 0,\n        autoSize: !0,\n        maxShadowOpacity: 1,\n        showCover: !1,\n        mobileScrollSupport: !0,\n        swipeDistance: 30,\n        clickEventForward: !0,\n        useMouseEvents: !0,\n        showPageCorners: !0,\n        disableFlipByClick: !1\n      };\n    }\n\n    getSettings(t) {\n      const e = this._default;\n      if (Object.assign(e, t), \"stretch\" !== e.size && \"fixed\" !== e.size) throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');\n      if (e.width <= 0 || e.height <= 0) throw new Error(\"Invalid width or height\");\n      if (e.flippingTime <= 0) throw new Error(\"Invalid flipping time\");\n      return \"stretch\" === e.size ? (e.minWidth <= 0 && (e.minWidth = 100), e.maxWidth < e.minWidth && (e.maxWidth = 2e3), e.minHeight <= 0 && (e.minHeight = 100), e.maxHeight < e.minHeight && (e.maxHeight = 2e3)) : (e.minWidth = e.width, e.maxWidth = e.width, e.minHeight = e.height, e.maxHeight = e.height), e;\n    }\n\n  }\n\n  !function (t, e) {\n    void 0 === e && (e = {});\n    var i = e.insertAt;\n\n    if (t && \"undefined\" != typeof document) {\n      var s = document.head || document.getElementsByTagName(\"head\")[0],\n          n = document.createElement(\"style\");\n      n.type = \"text/css\", \"top\" === i && s.firstChild ? s.insertBefore(n, s.firstChild) : s.appendChild(n), n.styleSheet ? n.styleSheet.cssText = t : n.appendChild(document.createTextNode(t));\n    }\n  }(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");\n  t.PageFlip = class extends class {\n    constructor() {\n      this.events = new Map();\n    }\n\n    on(t, e) {\n      return this.events.has(t) ? this.events.get(t).push(e) : this.events.set(t, [e]), this;\n    }\n\n    off(t) {\n      this.events.delete(t);\n    }\n\n    trigger(t, e) {\n      let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      if (this.events.has(t)) for (const s of this.events.get(t)) s({\n        data: i,\n        object: e\n      });\n    }\n\n  } {\n    constructor(t, e) {\n      super(), this.isUserTouch = !1, this.isUserMove = !1, this.setting = null, this.pages = null, this.setting = new x().getSettings(e), this.block = t;\n    }\n\n    destroy() {\n      this.ui.destroy(), this.block.remove();\n    }\n\n    update() {\n      this.render.update(), this.pages.show();\n    }\n\n    loadFromImages(t) {\n      this.ui = new u(this.block, this, this.setting);\n      const e = this.ui.getCanvas();\n      this.render = new d(this, this.setting, e), this.flipController = new g(this.render, this), this.pages = new n(this, this.render, t), this.pages.load(), this.render.start(), this.pages.show(this.setting.startPage), setTimeout(() => {\n        this.ui.update(), this.trigger(\"init\", this, {\n          page: this.setting.startPage,\n          mode: this.render.getOrientation()\n        });\n      }, 1);\n    }\n\n    loadFromHTML(t) {\n      this.ui = new c(this.block, this, this.setting, t), this.render = new w(this, this.setting, this.ui.getDistElement()), this.flipController = new g(this.render, this), this.pages = new o(this, this.render, this.ui.getDistElement(), t), this.pages.load(), this.render.start(), this.pages.show(this.setting.startPage), setTimeout(() => {\n        this.ui.update(), this.trigger(\"init\", this, {\n          page: this.setting.startPage,\n          mode: this.render.getOrientation()\n        });\n      }, 1);\n    }\n\n    updateFromImages(t) {\n      const e = this.pages.getCurrentPageIndex();\n      this.pages.destroy(), this.pages = new n(this, this.render, t), this.pages.load(), this.pages.show(e), this.trigger(\"update\", this, {\n        page: e,\n        mode: this.render.getOrientation()\n      });\n    }\n\n    updateFromHtml(t) {\n      const e = this.pages.getCurrentPageIndex();\n      this.pages.destroy(), this.pages = new o(this, this.render, this.ui.getDistElement(), t), this.pages.load(), this.ui.updateItems(t), this.render.reload(), this.pages.show(e), this.trigger(\"update\", this, {\n        page: e,\n        mode: this.render.getOrientation()\n      });\n    }\n\n    clear() {\n      this.pages.destroy(), this.ui.clear();\n    }\n\n    turnToPrevPage() {\n      this.pages.showPrev();\n    }\n\n    turnToNextPage() {\n      this.pages.showNext();\n    }\n\n    turnToPage(t) {\n      this.pages.show(t);\n    }\n\n    flipNext() {\n      let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"top\";\n      this.flipController.flipNext(t);\n    }\n\n    flipPrev() {\n      let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"top\";\n      this.flipController.flipPrev(t);\n    }\n\n    flip(t) {\n      let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"top\";\n      this.flipController.flipToPage(t, e);\n    }\n\n    updateState(t) {\n      this.trigger(\"changeState\", this, t);\n    }\n\n    updatePageIndex(t) {\n      this.trigger(\"flip\", this, t);\n    }\n\n    updateOrientation(t) {\n      this.ui.setOrientationStyle(t), this.update(), this.trigger(\"changeOrientation\", this, t);\n    }\n\n    getPageCount() {\n      return this.pages.getPageCount();\n    }\n\n    getCurrentPageIndex() {\n      return this.pages.getCurrentPageIndex();\n    }\n\n    getPage(t) {\n      return this.pages.getPage(t);\n    }\n\n    getRender() {\n      return this.render;\n    }\n\n    getFlipController() {\n      return this.flipController;\n    }\n\n    getOrientation() {\n      return this.render.getOrientation();\n    }\n\n    getBoundsRect() {\n      return this.render.getRect();\n    }\n\n    getSettings() {\n      return this.setting;\n    }\n\n    getUI() {\n      return this.ui;\n    }\n\n    getState() {\n      return this.flipController.getState();\n    }\n\n    getPageCollection() {\n      return this.pages;\n    }\n\n    startUserTouch(t) {\n      this.mousePosition = t, this.isUserTouch = !0, this.isUserMove = !1;\n    }\n\n    userMove(t, e) {\n      this.isUserTouch || e || !this.setting.showPageCorners ? this.isUserTouch && h.GetDistanceBetweenTwoPoint(this.mousePosition, t) > 5 && (this.isUserMove = !0, this.flipController.fold(t)) : this.flipController.showCorner(t);\n    }\n\n    userStop(t) {\n      let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n      this.isUserTouch && (this.isUserTouch = !1, e || (this.isUserMove ? this.flipController.stopMove() : this.flipController.flip(t)));\n    }\n\n  }, Object.defineProperty(t, \"__esModule\", {\n    value: !0\n  });\n});","map":{"version":3,"names":["t","e","exports","module","define","amd","self","St","constructor","state","angle","area","position","x","y","hardAngle","hardDrawingAngle","createdDensity","nowDrawingDensity","render","setDensity","setDrawingDensity","setPosition","setAngle","setArea","setHardDrawingAngle","setHardAngle","setOrientation","orientation","getDrawingDensity","getDensity","getHardAngle","i","image","isLoad","loadingAngle","Image","src","draw","getContext","convertToGlobal","s","getRect","pageWidth","n","height","save","translate","beginPath","lineTo","rotate","clip","drawImage","drawLoader","restore","simpleDraw","h","left","r","top","strokeStyle","fillStyle","lineWidth","rect","stroke","fill","arc","Math","PI","closePath","load","onload","newTemporaryCopy","getTemporaryCopy","hideTemporaryCopy","pages","currentPageIndex","currentSpreadIndex","landscapeSpread","portraitSpread","app","isShowCover","getSettings","showCover","destroy","createSpread","length","push","getSpread","getOrientation","getSpreadIndexByPage","getPageCount","getPages","getPage","Error","nextBy","indexOf","prevBy","getFlippingPage","getBottomPage","showNext","showSpread","showPrev","getCurrentPageIndex","show","getCurrentSpreadIndex","setCurrentSpreadIndex","setLeftPage","setRightPage","updatePageIndex","imagesHref","GetDistanceBetweenTwoPoint","sqrt","pow","GetSegmentLength","GetAngleBetweenTwoLine","acos","PointInRect","width","GetRotatedPoint","cos","sin","LimitPointToCircle","o","a","g","GetIntersectBetweenTwoSegment","GetIntersectBeetwenTwoLine","l","d","isFinite","abs","GetCordsFromTwoPoint","max","copiedElement","temporaryCopy","element","classList","add","cloneNode","parentElement","appendChild","remove","style","zIndex","drawHard","drawSoft","cssText","getDirection","slice","isSafari","startZIndex","getElement","pagesElement","dataset","density","direction","corner","topIntersectPoint","sideIntersectPoint","bottomIntersectPoint","parseInt","pageHeight","calc","calcAngleAndPosition","calculateIntersectPoint","getFlippingClipArea","topLeft","bottomLeft","getBottomClipArea","getAngle","getPosition","getActiveCorner","topRight","getFlippingProgress","getCorner","getBottomPagePosition","getShadowStartPoint","getShadowAngle","getSegmentToShadowLine","updateAngleAndGeometry","checkPositionAtCenterLine","calculateAngle","getPageRect","getRectFromBasePoint","getRotatedPoint","bottomRight","flippingPage","bottomPage","fold","setState","start","do","convertToPage","flip","disableFlipByClick","isPointOnCorners","finishAnimation","getBoundsRect","animateFlippingTo","reset","convertToBook","getDirectionByPoint","checkDirection","getPageCollection","setDirection","toString","setPageRect","setBottomPage","setFlippingPage","setShadowData","flipToPage","flipNext","flipPrev","stopMove","showCorner","checkState","getAnimationDuration","startAnimation","turnToPrevPage","turnToNextPage","clearShadow","getCalculation","getState","updateState","flippingTime","leftPage","rightPage","shadow","animation","pageRect","boundsRect","timer","safari","setting","RegExp","exec","window","navigator","userAgent","round","startedAt","durationFrame","frames","onAnimateEnd","drawFrame","update","requestAnimationFrame","duration","calculateBoundsRect","updateOrientation","getBlockWidth","getBlockHeight","size","minWidth","usePortrait","maxWidth","drawShadow","maxShadowOpacity","pos","opacity","progress","getUI","getDistElement","offsetWidth","offsetHeight","convertRectToGlobal","canvas","ctx","reload","clear","drawBookShadow","drawOuterShadow","drawInnerShadow","createLinearGradient","addColorStop","fillRect","moveTo","p","touchPoint","swipeTimeout","onResize","onMouseDown","checkTarget","target","getMousePos","clientX","clientY","startUserTouch","preventDefault","onTouchStart","changedTouches","point","time","Date","now","setTimeout","mobileScrollSupport","onMouseUp","userStop","onMouseMove","userMove","onTouchMove","cancelable","onTouchEnd","swipeDistance","getRender","insertAdjacentHTML","wrapper","querySelector","minHeight","autoSize","display","addEventListener","useMouseEvents","removeHandlers","distElement","getWrapper","setOrientationStyle","paddingBottom","removeEventListener","setHandlers","passive","getBoundingClientRect","clickEventForward","includes","tagName","toLowerCase","c","items","updateItems","innerHTML","u","querySelectorAll","resizeCanvas","getComputedStyle","getPropertyValue","getCanvas","w","outerShadow","innerShadow","hardShadow","hardInnerShadow","createShadows","drawHardInnerShadow","drawHardOuterShadow","drawLeftPage","drawRightPage","drawBottomPage","_default","startPage","maxHeight","showPageCorners","Object","assign","insertAt","document","head","getElementsByTagName","createElement","type","firstChild","insertBefore","styleSheet","createTextNode","PageFlip","events","Map","on","has","get","set","off","delete","trigger","data","object","isUserTouch","isUserMove","block","ui","loadFromImages","flipController","page","mode","loadFromHTML","updateFromImages","updateFromHtml","turnToPage","getFlipController","mousePosition","defineProperty","value"],"sources":["C:/Project/itworks-quantum/node_modules/page-flip/dist/js/page-flip.browser.js"],"sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e((t=t||self).St={})}(this,(function(t){\"use strict\";class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();for(let t of this.state.area)null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,s,n):this.drawLoader(e,{x:0,y:0},s,n),e.restore()}simpleDraw(t){const e=this.render.getRect(),i=this.render.getContext(),s=e.pageWidth,n=e.height,h=1===t?e.left+e.pageWidth:e.left,r=e.top;this.isLoad?i.drawImage(this.image,h,r,s,n):this.drawLoader(i,{x:h,y:r},s,n)}drawLoader(t,e,i,s){t.beginPath(),t.strokeStyle=\"rgb(200, 200, 200)\",t.fillStyle=\"rgb(255, 255, 255)\",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,s-1),t.stroke(),t.fill();const n={x:e.x+i/2,y:e.y+s/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity(\"hard\"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity(\"hard\"))}getSpread(){return\"landscape\"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error(\"Invalid page number\")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error(\"Invalid page\");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):\"landscape\"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends s{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(const t of this.imagesHref){const e=new i(this.render,t,\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class h{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return h.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x;return Math.acos((i*s+n*h)/(Math.sqrt(i*i+n*n)*Math.sqrt(s*s+h*h)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(h.GetDistanceBetweenTwoPoint(t,i)<=e)return i;const s=t.x,n=t.y,r=i.x,o=i.y;let a=Math.sqrt(Math.pow(e,2)*Math.pow(s-r,2)/(Math.pow(s-r,2)+Math.pow(n-o,2)))+s;i.x<0&&(a*=-1);let g=(a-s)*(n-o)/(s-r)+n;return s-r+n===0&&(g=e),{x:a,y:g}}static GetIntersectBetweenTwoSegment(t,e,i){return h.PointInRect(t,h.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x,r=t[0].x*t[1].y-t[1].x*t[0].y,o=e[0].x*e[1].y-e[1].x*e[0].y,a=i*o-s*r,g=n*o-h*r,l=-(r*h-o*n)/(i*h-s*n),d=-(i*o-s*r)/(i*h-s*n);if(isFinite(l)&&isFinite(d))return{x:l,y:d};if(Math.abs(a-g)<.1)throw new Error(\"Segment included\");return null}static GetCordsFromTwoPoint(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.max(i,s),h=[t];function r(t,e,i,s,n){return e>t?t+n*(i/s):e<t?t-n*(i/s):t}for(let o=1;o<=n;o+=1)h.push({x:r(t.x,e.x,i,n,o),y:r(t.y,e.y,s,n,o)});return h}}class r extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add(\"stf__item\"),this.element.classList.add(\"--\"+i)}newTemporaryCopy(){return\"hard\"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new r(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove(\"--simple\");const h=`\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\"hard\"===e?this.drawHard(h):this.drawSoft(i,h)}drawHard(t=\"\"){const e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,s=t+\"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \"+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=s}drawSoft(t,e=\"\"){let i=\"polygon( \";for(const t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};e=h.GetRotatedPoint(e,{x:0,y:0},this.state.angle),i+=e.x+\"px \"+e.y+\"px, \"}i=i.slice(0,-2),i+=\")\";const s=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=s}simpleDraw(t){const e=this.render.getRect(),i=e.pageWidth,s=e.height,n=1===t?e.left+e.pageWidth:e.left,h=e.top;this.element.classList.add(\"--simple\"),this.element.style.cssText=`\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove(\"--left\",\"--right\"),this.element.classList.add(1===t?\"--right\":\"--left\")}setDrawingDensity(t){this.element.classList.remove(\"--soft\",\"--hard\"),this.element.classList.add(\"--\"+t),super.setDrawingDensity(t)}}class o extends s{constructor(t,e,i,s){super(t,e),this.element=i,this.pagesElement=s}load(){for(const t of this.pagesElement){const e=new r(this.render,t,\"hard\"===t.dataset.density?\"hard\":\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class a{constructor(t,e,i,s){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(s,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||\"bottom\"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),\"top\"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):\"top\"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return\"top\"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e=\"top\"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error(\"Point is too small\");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,i=\"bottom\"===this.corner?this.pageHeight-t.y:t.y;let s=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(s=-s);const n=Math.PI-s;if(!isFinite(s)||n>=0&&n<.003)throw new Error(\"The G point is too small\");return\"bottom\"===this.corner&&(s=-s),s}getPageRect(t){return\"top\"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};\"top\"===this.corner?(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,i){let s=t;const n=h.LimitPointToCircle(e,this.pageWidth,s);s!==n&&(s=n,this.updateAngleAndGeometry(s));const r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let o=this.rect.bottomRight,a=this.rect.topLeft;if(\"bottom\"===this.corner&&(o=this.rect.topRight,a=this.rect.bottomLeft),o.x<=0){const t=h.LimitPointToCircle(i,r,a);t!==s&&(s=t,this.updateAngleAndGeometry(s))}return s}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state=\"read\",this.render=t,this.app=e}fold(t){this.setState(\"user_fold\"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState(\"flipping\");const i=e.height/10,s=\"bottom\"===this.calc.getCorner()?e.height-i:i,n=\"bottom\"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:s}),this.animateFlippingTo({x:e.pageWidth-i,y:s},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();const e=this.render.convertToBook(t),i=this.getBoundsRect(),s=this.getDirectionByPoint(e),n=e.y>=i.height/2?\"bottom\":\"top\";if(!this.checkDirection(s))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(s),this.bottomPage=this.app.getPageCollection().getBottomPage(s),\"landscape\"===this.render.getOrientation())if(1===s){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}return this.render.setDirection(s),this.calc=new a(s,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const i=this.app.getPageCollection().getCurrentSpreadIndex(),s=this.app.getPageCollection().getSpreadIndexByPage(t);try{s>i&&(this.app.getPageCollection().setCurrentSpreadIndex(s-1),this.flipNext(e)),s<i&&(this.app.getPageCollection().setCurrentSpreadIndex(s+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:\"top\"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:\"top\"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),i=\"bottom\"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState(\"read\",\"fold_corner\"))return;const e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState(\"fold_corner\"),this.calc.calc({x:i-1,y:1});const s=50,n=\"bottom\"===this.calc.getCorner()?e.height-1:1,h=\"bottom\"===this.calc.getCorner()?e.height-s:s;this.animateFlippingTo({x:i-1,y:n},{x:i-s,y:h},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState(\"read\"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,s=!0){const n=h.GetCordsFromTwoPoint(t,e),r=[];for(const t of n)r.push(()=>this.do(t));const o=this.getAnimationDuration(n.length);this.render.startAnimation(r,o,()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),s&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState(\"read\"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if(\"portrait\"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),i=e.pageWidth,s=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);return n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<s||n.x>e.width-s)&&(n.y<s||n.y>e.height-s)}}class l{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const i=new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t=\"landscape\";const e=this.getBlockWidth(),i=e/2,s=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let h=this.setting.width,r=this.setting.height,o=i-h;return\"stretch\"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t=\"portrait\"),h=\"portrait\"===t?this.getBlockWidth():this.getBlockWidth()/2,h>this.setting.maxWidth&&(h=this.setting.maxWidth),r=h/n,r>this.getBlockHeight()&&(r=this.getBlockHeight(),h=r*n),o=\"portrait\"===t?i-h/2-h:i-h):e<2*h&&this.app.getSettings().usePortrait&&(t=\"portrait\",o=i-h/2-h),this.boundsRect={left:o,top:s-r/2,width:2*h,height:r,pageWidth:h},t}setShadowData(t,e,i,s){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:s,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&\"portrait\"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class d extends l{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext(\"2d\")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),\"portrait\"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();\"portrait\"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);const s=this.ctx.createLinearGradient(0,0,e,0);s.addColorStop(0,\"rgba(0, 0, 0, 0)\"),s.addColorStop(.4,\"rgba(0, 0, 0, 0.2)\"),s.addColorStop(.49,\"rgba(0, 0, 0, 0.1)\"),s.addColorStop(.5,\"rgba(0, 0, 0, 0.5)\"),s.addColorStop(.51,\"rgba(0, 0, 0, 0.4)\"),s.addColorStop(1,\"rgba(0, 0, 0, 0)\"),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),i.addColorStop(1,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,\"rgba(0, 0, 0, 0)\"),i.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,s,0);0===this.shadow.direction?(this.ctx.translate(-s,-100),n.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.9,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.7,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(0,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(0,-100),n.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.1,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.3,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(1,\"rgba(0, 0, 0, 0)\")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,s,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle=\"white\",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class p{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(i)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||\"read\"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),\"read\"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);let s=!1;if(null!==this.touchPoint){const t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"),s=!0),this.touchPoint=null}this.app.userStop(i,s)}},this.parentElement=t,t.classList.add(\"stf__parent\"),t.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__wrapper\"></div>'),this.wrapper=t.querySelector(\".stf__wrapper\"),this.app=e;const s=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*s+\"px\",t.style.minHeight=i.minHeight+\"px\",\"fixed\"===i.size&&(t.style.minWidth=i.width*s+\"px\",t.style.minHeight=i.height+\"px\"),i.autoSize&&(t.style.width=\"100%\",t.style.maxWidth=2*i.maxWidth+\"px\"),t.style.display=\"block\",window.addEventListener(\"resize\",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove(\"--portrait\",\"--landscape\"),\"portrait\"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+\"%\"),this.wrapper.classList.add(\"--portrait\")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+\"%\"),this.wrapper.classList.add(\"--landscape\")),this.update()}removeHandlers(){window.removeEventListener(\"resize\",this.onResize),this.distElement.removeEventListener(\"mousedown\",this.onMouseDown),this.distElement.removeEventListener(\"touchstart\",this.onTouchStart),window.removeEventListener(\"mousemove\",this.onMouseMove),window.removeEventListener(\"touchmove\",this.onTouchMove),window.removeEventListener(\"mouseup\",this.onMouseUp),window.removeEventListener(\"touchend\",this.onTouchEnd)}setHandlers(){window.addEventListener(\"resize\",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener(\"mousedown\",this.onMouseDown),this.distElement.addEventListener(\"touchstart\",this.onTouchStart),window.addEventListener(\"mousemove\",this.onMouseMove),window.addEventListener(\"touchmove\",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener(\"mouseup\",this.onMouseUp),window.addEventListener(\"touchend\",this.onTouchEnd))}getMousePos(t,e){const i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||![\"a\",\"button\"].includes(t.tagName.toLowerCase())}}class c extends p{constructor(t,e,i,s){super(t,e,i),this.wrapper.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__block\"></div>'),this.distElement=t.querySelector(\".stf__block\"),this.items=s;for(const t of s)this.distElement.appendChild(t);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML=\"\";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class u extends p{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class=\"stf__canvas\"></canvas>',this.canvas=t.querySelectorAll(\"canvas\")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue(\"width\"),10),i=parseInt(t.getPropertyValue(\"height\"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class w extends l{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML(\"beforeend\",'<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'),this.outerShadow=this.element.querySelector(\".stf__outerShadow\"),this.innerShadow=this.element.querySelector(\".stf__innerShadow\"),this.hardShadow=this.element.querySelector(\".stf__hardShadow\"),this.hardInnerShadow=this.element.querySelector(\".stf__hardInnerShadow\")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText=\"display: none\",this.innerShadow.style.cssText=\"display: none\",this.hardShadow.style.cssText=\"display: none\",this.hardInnerShadow.style.cssText=\"display: none\"}reload(){this.element.querySelector(\".stf__outerShadow\")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let s=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0);\":\"transform: translate3d(0, 0, 0) rotateY(180deg);\",this.hardInnerShadow.style.cssText=s}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0) rotateY(180deg);\":\"transform: translate3d(0, 0, 0);\",this.hardShadow.style.cssText=i}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,s=0===this.getDirection()?\"to left\":\"to right\",n=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,o=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let a=\"polygon( \";for(const t of o){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:i,y:100},r),a+=e.x+\"px \"+e.y+\"px, \"}a=a.slice(0,-2),a+=\")\";const g=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${e}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${r}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;this.innerShadow.style.cssText=g}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,s=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?\"to right\":\"to left\",r=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let o=\"polygon( \";for(const t of r)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:s,y:100},i),o+=e.x+\"px \"+e.y+\"px, \"}o=o.slice(0,-2),o+=\")\";const a=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x-s}px, ${e.y-100}px, 0) rotate(${i}rad);\\n            clip-path: ${o};\\n            -webkit-clip-path: ${o};\\n        `;this.outerShadow.style.cssText=a}drawLeftPage(){\"portrait\"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;\"portrait\"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&(\"soft\"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText=\"display: none\"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:\"fixed\",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),\"stretch\"!==e.size&&\"fixed\"!==e.size)throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');if(e.width<=0||e.height<=0)throw new Error(\"Invalid width or height\");if(e.flippingTime<=0)throw new Error(\"Invalid flipping time\");return\"stretch\"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&\"undefined\"!=typeof document){var s=document.head||document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",\"top\"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(const s of this.events.get(t))s({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new x).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new d(this,this.setting,e),this.flipController=new g(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new c(this.block,this,this.setting,t),this.render=new w(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t=\"top\"){this.flipController.flipNext(t)}flipPrev(t=\"top\"){this.flipController.flipPrev(t)}flip(t,e=\"top\"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger(\"changeState\",this,t)}updatePageIndex(t){this.trigger(\"flip\",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger(\"changeOrientation\",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&h.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,\"__esModule\",{value:!0})}));\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}